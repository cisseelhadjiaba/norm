#!/bin/bash

# because of circular dependency of harfbuzz<->freetype, we compile freetype for harfbuzz and then use harfbuzz to compile freetype

needs_tool pkg-config ## freetype #2 won't find harfbuzz without pkg-config
depends_on glib ## hb-glib.h will not be generated without it, and is required by libpango later
## don't add libcairo -- it's the other way around -- cairo needs freetype

FREETYPE_OPTS="--enable-freetype-config"

## freetype #1 for harfbuzz
fetch_source http://downloads.sourceforge.net/freetype/freetype2/2.9/freetype-2.9.1.tar.bz2 220c82062171c513e4017c523d196933c9de4a7d
do_unpack_compile $FREETYPE_OPTS --without-harfbuzz

## harfbuzz with freshly built freetype
fetch_source http://www.freedesktop.org/software/harfbuzz/release/harfbuzz-1.7.6.tar.bz2 67a8754c510dfb68796b1cf6a7011ad6515f504d
do_unpack_compile --without-cairo --disable-introspection

## freetype #2 with freshly built harfbuzz
fetch_source http://downloads.sourceforge.net/freetype/freetype2/2.9/freetype-2.9.1.tar.bz2 220c82062171c513e4017c523d196933c9de4a7d
do_unpack_compile $FREETYPE_OPTS --with-harfbuzz

