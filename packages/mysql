#!/bin/bash

depends_on cmake
depends_on libncurses
depends_on libaio
depends_on libreadline
depends_on libnuma

fetch_source http://cdn.mysql.com/Downloads/MySQL-5.7/mysql-boost-5.7.20.tar.gz 1fcbaea0d75d71a8a868f518b5b0afaaa18c5cda

CONFOPTS=(
-DWITH_BOOST=boost
-DCURSES_INCLUDE_PATH="$ESCAPED_PREFIX/include/ncurses"
-DENABLE_DOWNLOADS=1
-DBUILD_CONFIG=mysql_release
-DFEATURE_SET=community
-DWITH_READLINE=ON
)

## tests are broken as of 5.7.17, disable
do_unpack_compile_notest "${CONFOPTS[@]}"
