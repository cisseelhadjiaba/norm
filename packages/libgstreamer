#!/bin/bash

needs_tool bison
needs_tool flex
needs_tool python
depends_on glib

fetch_source https://gstreamer.freedesktop.org/src/gstreamer/gstreamer-1.14.2.tar.xz ec0627229418081205c4f01427daeb62b8633aa7

CONFFLAGS=(
--with-package-origin="https://github.com/hmage/norm"
--disable-introspection
--disable-gst-debug
--disable-gst-tracer-hooks
--disable-examples
--disable-benchmarks
--without-unwind
--without-dw
--with-ptp-helper-permissions=none ## avoid using libcap
)

is_without tests && CONFFLAGS+=(--disable-tests --disable-check)

do_unpack_compile "${CONFFLAGS[@]}"
