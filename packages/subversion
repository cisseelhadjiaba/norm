#!/bin/bash

depends_on libapr
depends_on libaprutil
depends_on sqlite3
depends_on zlib
depends_on liblz4
depends_on libutf8proc
depends_on swig    # for perl bindings

fetch_source http://archive.apache.org/dist/subversion/subversion-1.10.2.tar.bz2 bc52ef2e671f821998ac9a5f7ebecbbcaaef83b8

CONFFLAGS=(
--disable-debug
--disable-mod-activation
--disable-nls
--without-apache-libexecdir
--with-apxs=no
--without-gnome-keyring
--without-swig
--without-sasl
--without-libmagic
)

do_unpack
pushd_src
do_configure "${CONFFLAGS[@]}"
do_make
do_test
do_install
do_make tools
do_make install-tools
cat Makefile|fgrep -A3 SWIG_PL_INCLUDES
do_make swig-pl
do_make install-swig-pl
popd_src
